name: HTML Files Sync Check

# è§¦å‘æ¡ä»¶ï¼šå½“ä»£ç æ¨é€åˆ° main åˆ†æ”¯æ—¶è¿è¡Œ
on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  sync-check:
    runs-on: ubuntu-latest
    steps:
      # æ­¥éª¤ 1ï¼šæ£€å‡ºä»£ç 
      - uses: actions/checkout@v3

      # æ­¥éª¤ 2ï¼šéªŒè¯ index.html æ–‡ä»¶å­˜åœ¨æ€§
      - name: Verify index.html exists
        run: |
          echo "Verifying index.html exists..."
          if [ -f "index.html" ]; then
            echo "âœ… index.html exists"
          else
            echo "âŒ index.html missing"
            exit 1
          fi

      # æ­¥éª¤ 3ï¼šéªŒè¯æ–‡ä»¶å¤§å°
      - name: Verify index.html size
        run: |
          echo "Verifying index.html size..."
          FILE_SIZE=$(wc -c < "index.html")
          if [ "$FILE_SIZE" -gt 0 ]; then
            echo "âœ… index.html has content ($FILE_SIZE bytes)"
          else
            echo "âŒ index.html is empty"
            exit 1
          fi

      # æ­¥éª¤ 4ï¼šéªŒè¯å…³é”®åŠŸèƒ½
      - name: Verify key features in index.html
        run: |
          echo "Verifying key features in index.html..."
          if grep -q "åœ°åŒºåˆ†ç±»ç­›é€‰å™¨" "index.html" && \
             grep -q "æ—¶æœŸåˆ†ç±»ç­›é€‰å™¨" "index.html" && \
             grep -q "æœç´¢èŒƒå›´é€‰æ‹©å™¨" "index.html"; then
            echo "âœ… index.html contains all key features"
          else
            echo "âŒ index.html missing some key features"
            exit 1
          fi

      # æ­¥éª¤ 5ï¼šæ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
      - name: Display success message
        if: success()
        run: |
          echo "ğŸ‰ All checks passed!"
          echo "index.html is ready for deployment"
          echo "GitHub Pages should display the latest changes correctly"